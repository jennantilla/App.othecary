{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<h1>Welcome back, {{ user.name }}!</h1>

<div id="user-profile">
    <h3>Resources</h3>
    <h4>As a {{ user_age }} year old {{ user.sex }}, you may be interested in the following topics:</h4>

    <div id="all-ages">
        <button type="button" class="collapsible">General Information: Dietary Supplements</button>
        <div class="content" id="gen-info">{{ gen_info | safe }}</div>

        <button type="button" class="collapsible">Reading Food & Supplement Labels</button>
        <div class="content" id="lbl-info">{{ lbl_info | safe }}</div>

        <button type="button" class="collapsible">Mineral Supplements</button>
        <div class="content" id="mineral">{{ min_info | safe }}</div>

        <button type="button" class="collapsible">Herbal Supplements</button>
        <div class="content" id="herbs">{{ herb_info | safe }}</div>

        <button type="button" class="collapsible">Health Fraud</button>
        <div class="content" id="fraud">{{ frd_info | safe }}</div>
    </div>

    <div id="female">
        {% if user.sex == "female" %}

        <button type="button" class="collapsible">Prenatal Supplements</button>
        <div class="content" id="#preg">{{ preg_info | safe }}</div>
        {% endif %}
    </div>
    
    <div id="diet">
    {% if user.diet == "vegetarian" or user.diet == "vegan" %}
    <h4>As a {{ user.diet }}, you may need to supplement your diet with some essential nutritional supplements:</h4>
    <button type="button" class="collapsible">Plant-Based Diet Supplements</button>
    <div class="content" id="#veg">{{ veg_info | safe }}</div>    
    {% endif %}
</div>
</div>

<div id="streakq-chart">
{% if history %}

    <h3>Routine for {{ today.strftime("%B %d, %Y") }}</h3>
    <div id="question">
        <form id="performance" action="/update-streak" method='POST'>
                <h4>Did you take your vitamins today?</h4>
                    <input class="form-control" type="radio" name="streak" value="yes">Yes
                    <input class="form-control" type="radio" name="streak" value="no">No
                    <input type="submit" id="streak-button" value="Update streak">
        </form>
        <br>
    </div>

    {% if log|length > 0 %}
    <div id="streak-sentence">You're on a <span id="streak-info">{{ user.streak_days }}</span> day streak</div>

    <div class="success-chart" style="width:400px">
    <canvas id="successChart"></canvas>
    </div>

    <br>
    <br>
    <br>

    {% endif %}
</div>

<div id="wrapper"></div>
<br>

{% else %}
    <div>
        <h3>You have no active supplements in your routine.</h3>
        <p>Check out the sidebar for some targeted topics that may interest you or
        <a href=/supplements>start your research.</a></p>
    </div>
{% endif %}

<div id="inactive-section">
<button type="button" class="collapsible">{{ user.name }}'s Inactive Supplements</button>
<div class="content" id="inactive">
</div>
</div>

<script src="/static/js/dashboard-charts.js"></script>
<script src="/static/js/dashboard-functionality.js"></script>
<script src="/static/js/dynamic-divs.js"></script>


{% endblock %}
